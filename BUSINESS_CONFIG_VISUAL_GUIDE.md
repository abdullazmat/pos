# Business Configuration Page - Visual & Architecture Guide

## Page Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header                                                       â”‚
â”‚ [ Back Button ] [Navigation] [User Profile]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Page Title & Description                                     â”‚
â”‚ ğŸª ConfiguraciÃ³n del Negocio                                 â”‚
â”‚ Personaliza la informaciÃ³n que aparece en tus tickets        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          LEFT COLUMN             â”‚      RIGHT COLUMN        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¨ Logo del Negocio      â”‚   â”‚  â”‚ ğŸ‘‘ Vista Previa     â”‚ â”‚
â”‚  â”‚ [Premium Badge]          â”‚   â”‚  â”‚    del Ticket       â”‚ â”‚
â”‚  â”‚                          â”‚   â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ‘‘ FunciÃ³n Premium   â”‚ â”‚   â”‚  â”‚ â”‚ Terminal Style  â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ Personaliza ticket   â”‚ â”‚   â”‚  â”‚ â”‚ Ticket Preview  â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ con logo             â”‚ â”‚   â”‚  â”‚ â”‚                 â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚ â”‚ MI NEGOCIO      â”‚ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚ â”‚ DirecciÃ³n...    â”‚ â”‚ â”‚
â”‚                                  â”‚  â”‚ â”‚ Tel: ...        â”‚ â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚ â”‚ Email: ...      â”‚ â”‚ â”‚
â”‚  â”‚ ğŸ‘‘ Plan de SuscripciÃ³n   â”‚   â”‚  â”‚ â”‚                 â”‚ â”‚ â”‚
â”‚  â”‚                          â”‚   â”‚  â”‚ â”‚ TICKET: ...     â”‚ â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚ â”‚ FECHA: ...      â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ¯ Gratuito   $0   â”‚   â”‚   â”‚  â”‚ â”‚ HORA: ...       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ /mes                â”‚   â”‚   â”‚  â”‚ â”‚                 â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ [100 productos]     â”‚   â”‚   â”‚  â”‚ â”‚ Producto        â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ [2 usuarios]        â”‚   â”‚   â”‚  â”‚ â”‚ Total: $...     â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ [Plan Actual]       â”‚   â”‚   â”‚  â”‚ â”‚                 â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚ â”‚ GRACIAS ...     â”‚ â”‚ â”‚
â”‚  â”‚                          â”‚   â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ â”‚ â­ Pro        $19.990  â”‚   â”‚                          â”‚
â”‚  â”‚ â”‚ /mes                â”‚   â”‚                          â”‚
â”‚  â”‚ â”‚ [âˆ productos]       â”‚   â”‚                          â”‚
â”‚  â”‚ â”‚ [âˆ usuarios]        â”‚   â”‚                          â”‚
â”‚  â”‚ â”‚ [âœ“ Logo]            â”‚   â”‚                          â”‚
â”‚  â”‚ â”‚ [Popular]           â”‚   â”‚                          â”‚
â”‚  â”‚ â”‚ [Click para...]     â”‚   â”‚                          â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                  â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Structure

```
BusinessConfigPage (Main Component)
â”œâ”€â”€ useEffect (on mount)
â”‚   â”œâ”€â”€ fetchPlans()
â”‚   â”œâ”€â”€ fetchSubscription()
â”‚   â””â”€â”€ fetchBusinessConfig()
â”‚
â”œâ”€â”€ Header (Navigation)
â”‚
â”œâ”€â”€ Page Title Section
â”‚
â”œâ”€â”€ Grid Container (2 columns)
â”‚   â”‚
â”‚   â”œâ”€â”€ LEFT COLUMN
â”‚   â”‚   â”œâ”€â”€ Logo Section
â”‚   â”‚   â”‚   â””â”€â”€ Premium Feature Card
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Plans Section
â”‚   â”‚       â””â”€â”€ Map plans.map((plan) => (
â”‚   â”‚           â”œâ”€â”€ Plan Card
â”‚   â”‚           â”œâ”€â”€ Plan Features
â”‚   â”‚           â””â”€â”€ Subscribe Button
â”‚   â”‚
â”‚   â””â”€â”€ RIGHT COLUMN
â”‚       â””â”€â”€ Ticket Preview (Sticky)
â”‚           â””â”€â”€ Terminal Style Ticket
â”‚
â””â”€â”€ (End of component)
```

## State Flow Diagram

```
Initial Load
    â”‚
    â”œâ”€â†’ [Loading State]
    â”‚
    â”œâ”€â†’ fetchPlans()
    â”‚   â””â”€â†’ API: GET /api/plans
    â”‚       â””â”€â†’ setPlans(data)
    â”‚
    â”œâ”€â†’ fetchSubscription()
    â”‚   â””â”€â†’ API: GET /api/subscription
    â”‚       â””â”€â†’ setCurrentSubscription(data)
    â”‚
    â”œâ”€â†’ fetchBusinessConfig()
    â”‚   â””â”€â†’ API: GET /api/business-config
    â”‚       â””â”€â†’ setFormData(data)
    â”‚
    â””â”€â†’ setLoading(false)

User Interaction
    â”‚
    â”œâ”€â†’ Click "Click para suscribirse â†’"
    â”‚
    â”œâ”€â†’ handleSubscribe(planId)
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Check: already subscribed?
    â”‚   â”‚   â””â”€â†’ Yes: toast.info()
    â”‚   â”‚   â””â”€â†’ No: continue
    â”‚   â”‚
    â”‚   â”œâ”€â†’ setSubscribing(true)
    â”‚   â”‚   â””â”€â†’ Button shows "Procesando..."
    â”‚   â”‚
    â”‚   â”œâ”€â†’ API: POST /api/subscription/upgrade
    â”‚   â”‚   â”œâ”€â†’ Success:
    â”‚   â”‚   â”‚   â”œâ”€â†’ toast.success()
    â”‚   â”‚   â”‚   â”œâ”€â†’ fetchSubscription()
    â”‚   â”‚   â”‚   â””â”€â†’ Button updates to "Plan Actual"
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â†’ Error:
    â”‚   â”‚       â””â”€â†’ toast.error()
    â”‚   â”‚
    â”‚   â””â”€â†’ setSubscribing(false)
    â”‚       â””â”€â†’ Button re-enabled
```

## Data Flow

### Plans Data Structure

```
plans: [
  {
    id: "FREE",
    name: "Gratuito",
    price: 0,
    icon: "ğŸ¯",
    popular: false,
    limits: ["100 productos", "2 usuarios"],
    features: {...}
  },
  {
    id: "PRO",
    name: "Pro",
    price: 19990,
    icon: "â­",
    popular: true,
    limits: ["âˆ productos", "âˆ usuarios", "âœ“ Logo"],
    features: {...}
  }
]
```

### Current Subscription Data

```
currentSubscription: {
  planId: "FREE" | "PRO",
  status: "active",
  currentPeriodStart: "2026-01-23T...",
  currentPeriodEnd: "2026-02-23T...",
  features: {
    maxProducts: 100,
    maxUsers: 2,
    customBranding: false,
    ...
  }
}
```

### Business Config Data

```
formData: {
  businessName: "MI NEGOCIO",
  address: "Av. San MartÃ­n 1234",
  phone: "011 1234-5678",
  email: "info@minegocio.com",
  website: "www.minegocio.com",
  cuitRucDni: "20-12345678-9",
  ticketMessage: "Â¡GRACIAS!\nVuelva pronto"
}
```

## Button States

### Subscribe Button

```
STATE 1: Browsing Plans
â”œâ”€ Not Subscribed â†’ [Click para suscribirse â†’] (bg-purple-600)
â””â”€ Already Subscribed â†’ [Plan Actual] (bg-slate-700, disabled)

STATE 2: Subscribing
â”œâ”€ All Plans â†’ [Procesando...] (disabled)

STATE 3: Subscribed
â”œâ”€ Current Plan â†’ [Plan Actual] (bg-slate-700, disabled)
â””â”€ Other Plans â†’ [Click para suscribirse â†’] (bg-purple-600, enabled)
```

## Color Scheme

### Theme Colors

```
Background:       bg-slate-950 (Nearly black)
Surface:          bg-slate-900 (Dark)
Border Active:    border-purple-600/30 â†’ border-purple-600/50 (hover)
Border Inactive:  border-slate-800
Text Primary:     text-white
Text Secondary:   text-slate-400
Accent:           bg-purple-600 (buttons)
Success:          bg-green-900/50 (badges)
Warning:          bg-yellow-900/50 (badges)

Ticket Preview:
Background:       bg-black
Text:             text-green-400
Border:           border-green-600/30
```

## Responsive Breakpoints

### Desktop (lg and above)

```
Grid: 2 columns (1fr 1fr)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  Left (1fr)  â”‚  Right (1fr) â”‚
â”‚              â”‚              â”‚
â”‚  Logo        â”‚  Ticket      â”‚
â”‚  Plans       â”‚  (Sticky)    â”‚
â”‚              â”‚              â”‚
```

### Tablet (md and below)

```
Grid: 1 column (1fr)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   Full Width  â”‚
â”‚               â”‚
â”‚   Logo        â”‚
â”‚   Plans       â”‚
â”‚               â”‚
â”‚   Ticket      â”‚
â”‚               â”‚
```

## Animation & Transitions

### Plan Cards

```
Hover: border-color transition (300ms)
       bg-color transition (150ms)

Selected: instant border change
          instant bg change
```

### Subscribe Button

```
Hover: bg-color transition (200ms)
       shadow-lg effect

Disabled: opacity 50%
          cursor-not-allowed
```

### Ticket Preview

```
Position: sticky top-20
          Stays 80px from top while scrolling
```

## Accessibility Features

### Semantic HTML

- Proper heading hierarchy (h1, h2)
- Button elements for interactions
- Section elements for layout
- Label elements for forms (if added)

### Visual Indicators

- Color not only indicator (badges with text)
- Clear button text labels
- High contrast (white on dark background)
- Focus states for keyboard navigation

### ARIA Labels (to consider adding)

- `aria-label` on icon buttons
- `aria-current="page"` on current plan
- `aria-disabled` on disabled buttons
- `role="region"` on sticky preview

## Performance Optimizations

### Current Implementation

- Single fetch per endpoint
- State updates batched
- No unnecessary re-renders
- Sticky positioning (GPU accelerated)

### Future Improvements

- Image lazy loading for logo (when added)
- Plan cache in localStorage
- Debounce if business info becomes editable
- Virtual scrolling if plans list grows

## Customization Points

### To Change Plan Features

```typescript
// File: /api/plans/route.ts
const PLANS = {
  PRO: {
    features: {
      maxProducts: 999999, // â† Change here
      maxUsers: 999999, // â† Change here
      customBranding: true, // â† Change here
      // ...
    },
  },
};
```

### To Change Colors

```typescript
// In page.tsx JSX
className = "bg-purple-600"; // â† Change to desired color
```

### To Change Plan Names/Descriptions

```typescript
// File: /api/plans/route.ts
{
  id: "PRO",
  name: "Pro",              // â† Change here
  description: "Todo...",   // â† Change here
}
```

### To Add New Plan

```typescript
// 1. Add to PLANS constant
// 2. It automatically appears in UI
// 3. All features inherited from constant
```
